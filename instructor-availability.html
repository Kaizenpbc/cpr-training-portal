<!DOCTYPE html>
<html>
<head>
    <title>Instructor Availability</title>
    <style>
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.4);
        }

        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 5px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-control {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .btn-primary {
            background-color: #007bff;
            color: white;
        }

        .close {
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .status-available {
            background-color: #28a745;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
        }

        .status-unavailable {
            background-color: #dc3545;
            color: white;
            padding: 3px 8px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <!-- Instructor Availability Modal -->
    <div id="instructorAvailabilityModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeInstructorAvailabilityModal()">&times;</span>
            <h2>Set Instructor Availability</h2>
            <div class="form-group">
                <label for="instructorName">Instructor Name:</label>
                <input type="text" id="instructorName" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="availabilityDate">Date:</label>
                <input type="date" id="availabilityDate" class="form-control" required>
            </div>
            <div class="form-group">
                <label for="availabilityStatus">Status:</label>
                <select id="availabilityStatus" class="form-control" required>
                    <option value="AVAILABLE">Available</option>
                    <option value="UNAVAILABLE">Unavailable</option>
                </select>
            </div>
            <button onclick="saveInstructorAvailability()" class="btn btn-primary">Save Availability</button>
        </div>
    </div>

    <script>
        function openInstructorAvailabilityModal() {
            document.getElementById('instructorAvailabilityModal').style.display = 'block';
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('availabilityDate').min = today;
        }

        function closeInstructorAvailabilityModal() {
            document.getElementById('instructorAvailabilityModal').style.display = 'none';
        }

        function saveInstructorAvailability() {
            const instructorName = document.getElementById('instructorName').value;
            const availabilityDate = document.getElementById('availabilityDate').value;
            const availabilityStatus = document.getElementById('availabilityStatus').value;

            if (!instructorName || !availabilityDate) {
                alert('Please fill in all required fields');
                return;
            }

            const availability = {
                instructorName,
                date: availabilityDate,
                status: availabilityStatus
            };

            // Get existing availabilities or initialize empty array
            const availabilities = JSON.parse(localStorage.getItem('instructorAvailabilities') || '[]');
            
            // Check for existing entry on same date
            const existingIndex = availabilities.findIndex(a => 
                a.instructorName === instructorName && 
                a.date === availabilityDate
            );

            if (existingIndex >= 0) {
                availabilities[existingIndex] = availability;
            } else {
                availabilities.push(availability);
            }

            localStorage.setItem('instructorAvailabilities', JSON.stringify(availabilities));
            window.parent.updateInstructorAvailabilityTable();
            closeInstructorAvailabilityModal();
        }
    </script>
</body>
</html> 